"aap6a_aap6_servicios_san" = "Servicios sanitarios",
"aap6a_aap6_otro"          = "Otro",
"aap6a_aap6_ninguno"       = "Ninguno",
"aap6a_aap6_nosabe"        = "No sabe",
"aap6a_aap6_noresponde"    = "No responde",
"aap6a_aap6_asistencia_tec"= "Asistencia técnica",
.default = variable
)
necesidades_hogares <- ggplot(tabla_necesidades, aes(x = reorder(variable_label, proporcion),
y = proporcion)) +
geom_col(fill = "steelblue") +
geom_text(aes(label = scales::percent(proporcion, accuracy = 0.1)),
hjust = -0.1, size = 3.5) +
coord_flip() +
labs(
title = "Necesidades reportadas por los hogares",
x = "Necesidad",
y = "Proporción de hogares"
) +
scale_y_continuous(labels = scales::percent_format(accuracy = 1),
expand = expansion(mult = c(0, .1)))
ggsave("stores/necesidades_hogares.png", necesidades_hogares, width = 7, height = 5, dpi = 300)
rm(tabla_necesidades,vars_necesidades,necesidades_hogares)
# NECESIDADES AGRUPADAS POR TIPO  --------------------------------
tabla_necesidades_agrupada <- data_migracion %>%
mutate(
# 1. Medios de vida y economía
grupo_medios = if_any(c(aap6a_aap6_empleo,
aap6a_aap6_deudas,
aap6a_aap6_semillas,
aap6a_aap6_asistencia_tec), ~ .x == 1),
# 2. Vivienda y servicios básicos
grupo_vivienda = if_any(c(aap6a_aap6_alojamiento,
aap6a_aap6_agua_med,
aap6a_aap6_servicios_san,
aap6a_aap6_transporte,
aap6a_aap6_comunicacion,
aap6a_aap6_articulos_hog), ~ .x == 1),
# 3. Alimentación y artículos básicos
grupo_alimentos = if_any(c(aap6a_aap6_comida), ~ .x == 1),
# 4. Salud y bienestar
grupo_salud = if_any(c(aap6a_aap6_atencion_med,
aap6a_aap6_medicamentos,
aap6a_aap6_apoyo_psico,,
aap6a_aap6_articulos_hig), ~ .x == 1),
# 5. Protección y educación
grupo_proteccion = if_any(c(aap6a_aap6_educ,
aap6a_aap6_apoyo_psicolegal), ~ .x == 1),
# 6. No clasificable
grupo_noclas = if_any(c(aap6a_aap6_otro,
aap6a_aap6_ninguno,
aap6a_aap6_nosabe,
aap6a_aap6_noresponde), ~ .x == 1))
# Resumen
resumen_necesidades <- tabla_necesidades_agrupada %>%
summarise(
`Medios de vida y economía`   = sum(grupo_medios, na.rm = TRUE),
`Vivienda y servicios básicos`= sum(grupo_vivienda, na.rm = TRUE),
`Alimentación y artículos básicos` = sum(grupo_alimentos, na.rm = TRUE),
`Salud y bienestar`           = sum(grupo_salud, na.rm = TRUE),
`Protección y educación`      = sum(grupo_proteccion, na.rm = TRUE),
`No clasificable`             = sum(grupo_noclas, na.rm = TRUE),
total_hogares                 = n()
) %>%
pivot_longer(cols = -total_hogares,
names_to = "grupo",
values_to = "conteo") %>%
mutate(proporcion = conteo / total_hogares) %>%
arrange(desc(proporcion))
resumen_necesidades
# NECESIDADES POR GEOGRAFÍA  --------------------------------
top3_grupos <- resumen_necesidades %>%
slice_max(proporcion, n = 3) %>%
pull(grupo)
data_migracion_sf_grupos <- data_migracion_sf %>%
mutate(
# 1. Medios de vida y economía
grupo_medios = if_any(c(aap6a_aap6_empleo,
aap6a_aap6_deudas,
aap6a_aap6_semillas,
aap6a_aap6_asistencia_tec), ~ .x == 1),
# 2. Vivienda y servicios básicos
grupo_vivienda = if_any(c(aap6a_aap6_alojamiento,
aap6a_aap6_agua_med,
aap6a_aap6_servicios_san,
aap6a_aap6_transporte,
aap6a_aap6_comunicacion), ~ .x == 1),
# 3. Alimentación y artículos básicos
grupo_alimentos = if_any(c(aap6a_aap6_comida,
aap6a_aap6_articulos_hig,
aap6a_aap6_articulos_hog), ~ .x == 1),
# 4. Salud y bienestar
grupo_salud = if_any(c(aap6a_aap6_atencion_med,
aap6a_aap6_medicamentos,
aap6a_aap6_apoyo_psico), ~ .x == 1),
# 5. Protección y educación
grupo_proteccion = if_any(c(aap6a_aap6_educ,
aap6a_aap6_apoyo_psicolegal), ~ .x == 1),
# 6. No clasificable
grupo_noclas = if_any(c(aap6a_aap6_otro,
aap6a_aap6_ninguno,
aap6a_aap6_nosabe,
aap6a_aap6_noresponde), ~ .x == 1)
)
map_nec_grupos <- data_migracion_sf_grupos %>%
group_by(nombre_dpt) %>%
summarise(
`Medios de vida y economía`    = mean(grupo_medios, na.rm = TRUE),
`Vivienda y servicios básicos` = mean(grupo_vivienda, na.rm = TRUE),
`Alimentación y artículos básicos` = mean(grupo_alimentos, na.rm = TRUE),
`Salud y bienestar`            = mean(grupo_salud, na.rm = TRUE),
`Protección y educación`       = mean(grupo_proteccion, na.rm = TRUE),
`No clasificable`              = mean(grupo_noclas, na.rm = TRUE),
geometry = sf::st_union(geometry),
.groups = "drop"
)
plot_grupo <- function(sf_df, col_name) {
ggplot(sf_df) +
geom_sf(aes(fill = .data[[col_name]]), color = "white", linewidth = 0.25) +
scale_fill_viridis_c(
option = "magma",
labels = percent_format(accuracy = 1),
name = "% hogares",
limits = c(0,1)
)
+
labs(title = col_name) +
theme_void(base_size = 11) +
theme(
legend.position = "right",
plot.title = element_text(face = "bold")
)
}
p_list <- lapply(top3_grupos, function(g) plot_grupo(map_nec_grupos, g))
p_grid <- p_list[[1]] | p_list[[2]] | p_list[[3]] +
plot_annotation(title = "Necesidades agrupadas más frecuentes (%) — por departamento")
ggsave("stores/mapa_necesidades_agrupadas_grid.png", p_grid, width = 14, height = 5.2, dpi = 300)
rm(data_migracion_sf_grupos, map_nec_grupos, p_list, p_grid, plot_grupo, top3_grupos, tabla_necesidades_agrupada, resumen_necesidades)
# Filtrar Bogotá--------------------
data_bogota <- data_migracion %>%
filter(intro5 == "bogota. d.c.")
# --- Quedarse con un registro por hogar, prefiriendo demo3 == "si"
data_filtrada <- data_bogota %>%
group_by(id_hogar) %>%
arrange(desc(demo3 == "si")) %>%  # ordena poniendo primero los que tienen demo3 == "si"
slice(1) %>%                      # toma el primer registro de cada hogar
ungroup()
# Calcular índice de hacinamiento ---------------------------
data_filtrada <- data_filtrada %>%
mutate(
personas_cuarto = miembros1 / alojamiento7,
hacinamiento = case_when(
is.na(personas_cuarto) ~ NA_character_,
personas_cuarto <= 2 ~ "Sin hacinamiento",
personas_cuarto > 2 & personas_cuarto <= 3 ~ "Moderado",
personas_cuarto > 3 ~ "Crítico"
)
# Revisar valores vacios índice de hacinamiento ---------------------------
table(data_filtrada$hacinamiento, useNA = "ifany")
# Variables únicas (riesgo desalojo, intención moverse, tiempo residencia)
vars_unica <- c("miembros1", "alojamiento7")
# NA en variables únicas
na_resumen <- sapply(data_filtrada[vars_unica], function(x) sum(is.na(x)))
na_resumen
# Orden lógico de categorías
data_filtrada$hacinamiento <- factor(
data_filtrada$hacinamiento,
levels = c("Sin hacinamiento", "Moderado", "Crítico")
)
# Distribución y gráfico de barras hacinamiento --------------------------
hacinamiento_resumen <- data_filtrada %>%
group_by(hacinamiento) %>%
summarise(Frecuencia = n()) %>%
mutate(Proporcion = round(100 * Frecuencia / sum(Frecuencia), 1))
hacinamiento_resumen
hacinamiento <- ggplot(data_filtrada, aes(x = hacinamiento, fill = hacinamiento)) +
geom_bar() +
theme_minimal() +
labs(
title = "Distribución del hacinamiento en Bogotá",
x = "Categoría de hacinamiento",
y = "Número de hogares"
) +
theme(legend.position = "none")
ggsave("stores/Hacinamiento.png", hacinamiento, width = 7, height = 5, dpi = 300)
rm(hacinamiento, na_resumen, vars_unica,var_names, hacinamiento_resumen)
# INTENCIÓN DE MOVERSE Y HACINAMIENTO -------------------------------------------
df_bubble <- data_filtrada %>%
filter(demo22 != "no tienen la intencion de moverse") %>%
count(hacinamiento, demo22, name = "n") %>%
group_by(hacinamiento) %>%
mutate(pct = n / sum(n),
pct_lab = percent(pct, accuracy = 0.1)) %>%
ungroup()
df_bubble
p_bubble <- ggplot(df_bubble, aes(x = hacinamiento, y = demo22, size = pct, color = hacinamiento)) +
geom_point(alpha = 0.75) +
scale_size_area(name = "% dentro de hacinamiento", labels = percent_format(accuracy = 1),
max_size = 18) +
labs(title = "Hacinamiento vs intención de movilizarse en 6 meses",
x = "Nivel de hacinamiento", y = "Intención de movilidad (demo22)") +
theme_minimal(base_size = 12)
p_bubble
ggsave("stores/hacinamiento_movilidad_bubble.png", p_bubble, width = 12, height = 6, dpi = 300)
rm(df_bubble,p_bubble)
# RELACIÓN HACINAMIENTO CON VARIABLES DE INGRESO ---------------------------
vars_financieras <- c(
# Fuentes de ingreso
"mediosvida5_mediosvida5_prestamos","mediosvida5_mediosvida5_ahorros",
"mediosvida5_mediosvida5_trabajo", "mediosvida5_mediosvida5_asistencia",
"mediosvida5_mediosvida5_apoyocomunidad","mediosvida5_mediosvida5_venderbienes",
"mediosvida5_mediosvida5_donaciones","mediosvida5_mediosvida5_notiene", "mediosvida5_mediosvida5_otra",
# Productos financieros
"mediosvida7_mediosvida7_cuenta_ahorro", "mediosvida7_mediosvida7_cuenta_corriente",
"mediosvida7_mediosvida7_billetera_electronica","mediosvida7_mediosvida7_deposito_bajo_monto",
"mediosvida7_mediosvida7_microcredito", "mediosvida7_mediosvida7_prestamo_vivienda",
"mediosvida7_mediosvida7_prestamo_de_libre_inversion", "mediosvida7_mediosvida7_tarjeta_de_credito",
"mediosvida7_mediosvida7_otro", "mediosvida7_mediosvida7_ninguno",
"mediosvida7_mediosvida7_no_sabe",  "mediosvida7_mediosvida7_noresponde"
)
# NAs por variable
na_financieras <- sapply(vars_financieras, \(v) sum(is.na(data_migracion[[v]])))
na_financieras <- data.frame(variable = names(na_financieras), na_count = as.integer(na_financieras))
# Función para generar gráficos asociados a ingresos
make_plot_finanzas <- function(df, prefix, titulo, filename) {
cols <- grep(paste0("^", prefix), names(df), value = TRUE)
df_long <- df %>%
# estandariza a binario por si viene "1" o 1
mutate(across(all_of(cols), ~ as.integer(. %in% c(1, "1")))) %>%
group_by(hacinamiento) %>%
summarise(across(all_of(cols), ~ sum(.x, na.rm = TRUE)), .groups = "drop") %>%
pivot_longer(-hacinamiento, names_to = "producto", values_to = "conteo") %>%
group_by(hacinamiento) %>%
mutate(total = sum(conteo), porcentaje = conteo / total) %>%
ungroup() %>%
mutate(
# limpia prefijos largos en nombres de columnas
producto = str_remove(producto, paste0("^", prefix, "_", prefix, "_")),
producto = str_remove(producto, paste0("^", prefix, "_"))
)
p <- ggplot(df_long, aes(x = hacinamiento, y = porcentaje, fill = producto)) +
geom_col() +
scale_y_continuous(labels = percent_format(accuracy = 1)) +
labs(title = titulo, x = "Nivel de hacinamiento", y = "Porcentaje dentro de hacinamiento", fill = NULL) +
theme_minimal(base_size = 12)
if (!dir.exists("stores")) dir.create("stores", recursive = TRUE)
ggsave(file.path("stores", filename), p, width = 11, height = 6, dpi = 300)
p
}
# --- Aplicar función para MV5 (fuentes de ingreso) y MV7 (productos financieros) ---
p_mv5 <- make_plot_finanzas(
data_filtrada,
"mediosvida5",
"Fuentes de ingreso del hogar (porcentaje dentro de cada nivel de hacinamiento)",
"mv5_fuentes_ingreso_porcentaje.png"
)
p_mv7 <- make_plot_finanzas(
data_filtrada,
"mediosvida7",
"Acceso/uso de productos financieros (porcentaje dentro de cada nivel de hacinamiento)",
"mv7_productos_financieros_porcentaje.png"
)
rm(make_plot_finanzas, p_mv5, p_mv7,na_financieras)
# SOLO BOGOTÁ
tabla_necesidades_agrupada <- data_filtrada %>%
mutate(
# 1. Medios de vida y economía
grupo_medios = if_any(c(aap6a_aap6_empleo,
aap6a_aap6_deudas,
aap6a_aap6_semillas,
aap6a_aap6_asistencia_tec), ~ .x == 1),
# 2. Vivienda y servicios básicos
grupo_vivienda = if_any(c(aap6a_aap6_alojamiento,
aap6a_aap6_agua_med,
aap6a_aap6_servicios_san,
aap6a_aap6_transporte,
aap6a_aap6_comunicacion,aap6a_aap6_articulos_hog), ~ .x == 1),
# 3. Alimentación y artículos básicos
grupo_alimentos = if_any(c(aap6a_aap6_comida), ~ .x == 1),
# 4. Salud y bienestar
grupo_salud = if_any(c(aap6a_aap6_atencion_med,
aap6a_aap6_medicamentos,
aap6a_aap6_apoyo_psico,aap6a_aap6_articulos_hig), ~ .x == 1),
# 5. Protección y educación
grupo_proteccion = if_any(c(aap6a_aap6_educ,
aap6a_aap6_apoyo_psicolegal), ~ .x == 1),
# 6. No clasificable
grupo_noclas = if_any(c(aap6a_aap6_otro,
aap6a_aap6_ninguno,
aap6a_aap6_nosabe,
aap6a_aap6_noresponde), ~ .x == 1)
)
## Resumen de tipo de necesidad
resumen_necesidades <- tabla_necesidades_agrupada %>%
summarise(
`Medios de vida y economía`   = sum(grupo_medios, na.rm = TRUE),
`Vivienda y servicios básicos`= sum(grupo_vivienda, na.rm = TRUE),
`Alimentación y artículos básicos` = sum(grupo_alimentos, na.rm = TRUE),
`Salud y bienestar`           = sum(grupo_salud, na.rm = TRUE),
`Protección y educación`      = sum(grupo_proteccion, na.rm = TRUE),
`No clasificable`             = sum(grupo_noclas, na.rm = TRUE),
total_hogares                 = n()
) %>%
pivot_longer(cols = -total_hogares,
names_to = "grupo",
values_to = "conteo") %>%
mutate(proporcion = conteo / total_hogares) %>%
arrange(desc(proporcion))
resumen_necesidades
# Calcular totales por tipo de hacinamiento (para base de porcentajes)
totales <- tabla_necesidades_agrupada %>%
group_by(hacinamiento) %>%
summarise(total_hogares = n(), .groups = "drop")
# Transformar a formato largo y calcular porcentajes
necesidades_hacinamiento <- tabla_necesidades_agrupada %>%
select(hacinamiento,
grupo_medios,
grupo_vivienda,
grupo_alimentos,
grupo_salud,
grupo_proteccion,
grupo_noclas) %>%
pivot_longer(
cols = starts_with("grupo"),
names_to = "grupo",
values_to = "valor"
) %>%
filter(valor == TRUE | valor == 1) %>%
group_by(hacinamiento, grupo) %>%
summarise(conteo = n(), .groups = "drop") %>%
left_join(totales, by = "hacinamiento") %>%
mutate(
pct = (conteo / total_hogares) * 100,
grupo = recode(grupo,
grupo_medios     = "Medios de vida y economía",
grupo_vivienda   = "Vivienda y servicios básicos",
grupo_alimentos  = "Alimentación y artículos básicos",
grupo_salud      = "Salud y bienestar",
grupo_proteccion = "Protección y educación",
grupo_noclas     = "No clasificable"
)
# Gráfica: barras agrupadas por tipo de hacinamiento dentro de cada necesidad
necesidades_hacinamiento <- ggplot(necesidades_hacinamiento, aes(x = grupo, y = pct, fill = hacinamiento)) +
geom_col(position = "dodge") +
labs(
title = "Porcentaje de hogares con necesidades según tipo de hacinamiento",
x = "Grupo de necesidad",
y = "Porcentaje de hogares",
fill = "Tipo de hacinamiento"
) +
theme_minimal() +
theme(
axis.text.x = element_text(angle = 45, hjust = 1, size = 8),
axis.title.x = element_text(margin = margin(t = 10))
)
ggsave("stores/nec_hacinamiento_corr_grid.png", necesidades_hacinamiento, width = 14, height = 6, dpi = 300)
# Gráfico de correlaciones
resumen_necesidades <- tabla_necesidades_agrupada %>%
summarise(
`Medios de vida y economía`   = sum(grupo_medios, na.rm = TRUE),
`Vivienda y servicios básicos`= sum(grupo_vivienda, na.rm = TRUE),
`Alimentación y artículos básicos` = sum(grupo_alimentos, na.rm = TRUE),
`Salud y bienestar`           = sum(grupo_salud, na.rm = TRUE),
`Protección y educación`      = sum(grupo_proteccion, na.rm = TRUE),
`No clasificable`             = sum(grupo_noclas, na.rm = TRUE),
total_hogares                 = n()
) %>%
pivot_longer(cols = -total_hogares,
names_to = "grupo",
values_to = "conteo") %>%
mutate(proporcion = conteo / total_hogares) %>%
arrange(desc(proporcion))
resumen_necesidades
# Calcular totales por tipo de hacinamiento (para base de porcentajes)
totales <- tabla_necesidades_agrupada %>%
group_by(hacinamiento) %>%
summarise(total_hogares = n(), .groups = "drop")
# Transformar a formato largo y calcular porcentajes
df_necesidades_hacinamiento <- tabla_necesidades_agrupada %>%
select(hacinamiento,
grupo_medios,
grupo_vivienda,
grupo_alimentos,
grupo_salud,
grupo_proteccion,
grupo_noclas) %>%
pivot_longer(
cols = starts_with("grupo"),
names_to = "grupo",
values_to = "valor"
) %>%
filter(valor == TRUE | valor == 1) %>%
group_by(hacinamiento, grupo) %>%
summarise(conteo = n(), .groups = "drop") %>%
left_join(totales, by = "hacinamiento") %>%
mutate(
pct = (conteo / total_hogares) * 100,
grupo = recode(grupo,
grupo_medios     = "Medios de vida y economía",
grupo_vivienda   = "Vivienda y servicios básicos",
grupo_alimentos  = "Alimentación y artículos básicos",
grupo_salud      = "Salud y bienestar",
grupo_proteccion = "Protección y educación",
grupo_noclas     = "No clasificable"
)
# Gráfica: barras agrupadas por tipo de hacinamiento dentro de cada necesidad
g_necesidades_hacinamiento <- ggplot(df_necesidades_hacinamiento, aes(x = grupo, y = pct, fill = hacinamiento)) +
geom_col(position = "dodge") +
labs(
title = "Porcentaje de hogares con necesidades según tipo de hacinamiento (Bogotá)",
x = "Grupo de necesidad",
y = "Porcentaje de hogares",
fill = "Tipo de hacinamiento"
) +
theme_minimal() +
theme(
axis.text.x = element_text(angle = 45, hjust = 1, size = 8),
axis.title.x = element_text(margin = margin(t = 10))
)
ggsave("stores/nec_hacinamiento_barras_bogota.png", g_necesidades_hacinamiento, width = 14, height = 6, dpi = 300)
# Gráfico de correlaciones
hm_pct <- df_necesidades_hacinamiento %>%
mutate(grupo = factor(grupo)) %>%
ggplot(aes(x = hacinamiento, y = grupo, fill = pct/100)) +
geom_tile(color = "white", linewidth = 0.2) +
geom_text(aes(label = percent(pct/100, accuracy = 0.1)), size = 3) +
scale_fill_viridis_c(option = "magma", limits = c(0,1),
labels = percent_format(accuracy = 1), name = "% dentro de hacinamiento") +
labs(title = "A) Participación por celda (%)") +
theme_minimal(base_size = 11) +
theme(panel.grid = element_blank(), axis.title = element_blank())
#  Residuales de Pearson
tab_cont <- df_necesidades_hacinamiento %>%
select(hacinamiento, grupo, conteo) %>%
pivot_wider(names_from = hacinamiento, values_from = conteo, values_fill = 0) %>%
as.data.frame()
rownames(tab_cont) <- tab_cont$grupo
tab_cont$grupo <- NULL
M <- as.matrix(tab_cont)
# Esperados y residuales
row_tot <- rowSums(M); col_tot <- colSums(M); N <- sum(M)
E <- outer(row_tot, col_tot) / N
R <- (M - E) / sqrt(pmax(E, 1e-9))  # evita divisiones por cero
df_resid <- as.data.frame(R) |>
tibble::rownames_to_column("grupo") |>
pivot_longer(-grupo, names_to = "hacinamiento", values_to = "residual") # Formato largo
hm_res <- ggplot(df_resid, aes(x = hacinamiento, y = grupo, fill = residual)) +
geom_tile(color = "white", linewidth = 0.2) +
# valores positivos = sobre-representado; negativos = infra-representado
scale_fill_gradient2(low = "#2166AC", mid = "white", high = "#B2182B",
midpoint = 0, name = "Residual") +
labs(title = "B) Residuales de Pearson (sobre/infra-representación)") +
theme_minimal(base_size = 11) +
theme(panel.grid = element_blank(), axis.title = element_blank())
p_grid <- hm_pct | hm_res
p_grid <- p_grid + plot_annotation(
title = "Hacinamiento vs grupos de necesidades: % por celda y residuales de Pearson (Bogotá)"
)
ggsave("stores/nec_hacinamiento_corr_grid_bogota.png", p_grid, width = 14, height = 6, dpi = 300)
rm(tab_cont, M, row_tot, col_tot, N, E, R, df_resid, hm_pct, hm_res, p_grid,
tabla_necesidades_agrupada, totales, resumen_necesidades, g_necesidades_hacinamiento,
df_necesidades_hacinamiento, base_bogota)
# Resumen de la variable de gasto en vivienda
summary(data_filtrada$san53_viv)
# Revisar cuántos NA hay
sum(is.na(data_filtrada$san53_viv))
# --- Resumen estadístico del gasto en vivienda
resumen_gasto_viv <- data_filtrada %>%
group_by(hacinamiento) %>%
summarise(
n = n(),
media = mean(san53_viv, na.rm = TRUE),
mediana = median(san53_viv, na.rm = TRUE),
p25 = quantile(san53_viv, 0.25, na.rm = TRUE),
p75 = quantile(san53_viv, 0.75, na.rm = TRUE),
maximo = max(san53_viv, na.rm = TRUE),
.groups = "drop"
)
# --- Resumen estadístico del gasto en vivienda
print(resumen_gasto_viv)
# --- Crear variable de gasto total
data_filtrada <- data_filtrada %>%
mutate(
gasto_total = rowSums(across(c(san52_alim, san53_viv, san54_serv,
san55_sal, san56_edu, san57_otros)), na.rm = TRUE),
pct_vivienda = if_else(gasto_total > 0, (san53_viv / gasto_total) * 100, NA_real_)
)
# --- Revisar tabla de resumen
resumen_pct_viv <- data_filtrada %>%
group_by(hacinamiento) %>%
summarise(
n = n(),
media = mean(pct_vivienda, na.rm = TRUE),
mediana = median(pct_vivienda, na.rm = TRUE),
p25 = quantile(pct_vivienda, 0.25, na.rm = TRUE),
p75 = quantile(pct_vivienda, 0.75, na.rm = TRUE),
maximo = max(pct_vivienda, na.rm = TRUE),
.groups = "drop"
)
write.xlsx(resumen_pct_viv, file = "stores/resumen_pct_viv.xlsx", row.names = FALSE)
library(openxlsx)
write.xlsx(resumen_pct_viv, file = "stores/resumen_pct_viv.xlsx", row.names = FALSE)
write.xlsx(resumen_pct_viv, file = "stores/resumen_pct_viv.xlsx")
install.packages("writexl")
library(writexl)
write_xlsx(resumen_pct_viv, "stores/resumen_pct_viv.xlsx")
library(openxlsx
install.packages("writexl")
library(writexl)
write_xlsx(r
View(resumen_pct_viv)
View(resumen_gasto_viv)
